---
- name: Print contents
  vars:
    contents: "\"{{ lookup('file', '../bgp_config_files/results_stable.txt') }}\""
  debug: msg="{{ contents }}"

- name: Print Json_bgp
  vars:
    contents: "\"{{ lookup('file', '../bgp_config_files/results_stable.txt') }}\""
    json_bgp: "{{ contents | parse_cli('/home/george/UOC-CSD/Diploma_Thesis/ansible/parsers/ios_parser.yaml') }}"
  debug: msg="{{ json_bgp }}"

- name: Print Results
  vars:
    contents: "\"{{ lookup('file', '../bgp_config_files/results_stable.txt') }}\""
    json_bgp: "{{ contents | parse_cli('/home/george/UOC-CSD/Diploma_Thesis/ansible/parsers/ios_parser.yaml') }}"
  local_action: copy content="{{ json_bgp }}" dest=../bgp_config_files/results.txt

- name: Execute python scripts
  become: true
  become_user: root
  vars:
    contents: "\"{{ lookup('file', '../bgp_config_files/results_stable.txt') }}\""
    json_bgp: "{{ contents | parse_cli('/home/george/UOC-CSD/Diploma_Thesis/ansible/parsers/ios_parser.yaml') }}"
  command: python3 ../../python/ios_generator.py '{{ json_bgp | to_json}}'
